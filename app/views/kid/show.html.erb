<div class="class-grid-container">
  <img class="img_set" src="../img_ref/bell.png" alt=""/>
  <h2 class="title img_left"><%= @kid[:name]%> | รหัสนักเรียน <%= @kid[:id]%></h2><br>
  <h2 class="_title_sub img_left"><%= @kid[:grade]%> โรงเรียน<%= @kid[:school]%></h2>
  <%= link_to :back  do %>
    <span class="btn-backer kid-track">
      <i class="fa fa-chevron-left" aria-hidden="true"></i>
      ย้อนกลับ
    </span>
  <% end %>
  <br>
  <br>
  <h2 class="_title_sub img_left kid-track">วิชาที่ลงเรียน</h2>
  <div class="desktop-show">
    <br>
    <br>
    <br>
  </div>
  <div class="desktop-show">
    <table>
      <thead>
        <tr>
          <th>คอร์สเรียน</th>
          <th>คอมเม้นท์</th>
          <th>คะเเนนรวม</th>
          <% 14.times do |i| %>
            <th><%= i + 1 %></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
        <% @result.each do |r| %>
          <% seat_detail = Seat.seat_detail(r)%>
          <tr>
            <td><a href="<%= report_index_path %>/<%= r[:classroom] %>"><%= r[:classroom] %></a></td>
            <td><%= r[:comment] %></td>
            <td>
              <div class="sc-tb">สอบ (<%= seat_detail[:total] %>)</div>
              <div class="ma-tb">ตั้งใจ (<%= seat_detail[:total_mental] %>)</div>
            </td>
            <% seat_detail[:score][:scoring].each_with_index do |score,idx|%>
              <td style="max-width:22px">
                <span><%= seat_detail[:score][:scoring][idx] %></span><br>
                <span><%= seat_detail[:score][:mental][idx +1] %></span>
              </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>
  <div class="mobi-show">
    <% @result.each do |r| %>
      <% seat_detail = Seat.seat_detail(r)%>
        <div class="course-result-mobi">
          <a href="<%= report_index_path %>/<%= r[:classroom] %>" ><%= r[:classroom] %></a><br>
          <span class="sub-t"><%= Classroom.where(spec: r[:classroom]).first[:name] %></span>
          <table>
            <thead>
              <tr>
                <th>ครั้งที่</th>
                <% 14.times do |t|%>
                  <th><%= t+1 %></th>
                <% end %>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>
                  คะเเนน
                </td>
                <% 14.times do |t|%>
                  <td><%= seat_detail[:score][:scoring][t] %></td>
                <% end %>
              </tr>
            </tbody>
          </table><br>
          <canvas id="myChart<%= r[:classroom]%>" height="200"></canvas>
          <script>
            new Chart(document.getElementById("myChart<%= r[:classroom]%>"),{"type":"line","data":{"labels":[1,2,3,4,5,6,7,8,9,10,11,12,13,14],"datasets":[{"label":"คะเเนนสอบ","data":<%= seat_detail[:score][:scoring].to_json %>,"fill":false,"borderColor":"rgb(231, 131, 143)","lineTension":0.2}]},"options":{ legend: {display: false}, scales: { xAxes: [{ gridLines: { display:false }}], yAxes: [{ gridLines: { display:false}}] } }});
          </script>

        </div>
    <% end %>
  </div>

</div>
